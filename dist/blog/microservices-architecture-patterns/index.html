<!DOCTYPE html><html lang="en" data-astro-cid-37fxchfa> <head><!-- Basic Meta Tags --><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Explore the most effective microservices patterns for building scalable, maintainable systems. Learn from real-world experience implementing these patterns in production environments."><meta name="author" content="Martin Carrasco"><meta name="robots" content="index, follow"><link rel="canonical" href="https://www.martiixx.dev/blog/microservices-architecture-patterns"><!-- Open Graph Meta Tags --><meta property="og:type" content="article"><meta property="og:title" content="Microservices Architecture Patterns: A Practical Guide"><meta property="og:description" content="Explore the most effective microservices patterns for building scalable, maintainable systems. Learn from real-world experience implementing these patterns in production environments."><meta property="og:image" content="/blog/microservices-patterns.jpg"><meta property="og:url" content="https://www.martiixx.dev/blog/microservices-architecture-patterns"><meta property="og:site_name" content="Martin Carrasco - Software Engineer Consultant"><meta property="og:locale" content="en_US"><meta property="article:author" content="Martin Carrasco"><meta property="article:published_time" content="2024-01-15T00:00:00.000Z"><meta property="article:modified_time" content="2024-01-20T00:00:00.000Z"><meta property="article:tag" content="microservices"><meta property="article:tag" content="architecture"><meta property="article:tag" content="backend"><meta property="article:tag" content="patterns"><!-- Twitter Card Meta Tags --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Microservices Architecture Patterns: A Practical Guide"><meta name="twitter:description" content="Explore the most effective microservices patterns for building scalable, maintainable systems. Learn from real-world experience implementing these patterns in production environments."><meta name="twitter:image" content="/blog/microservices-patterns.jpg"><meta name="twitter:creator" content="@martiixx"><meta name="twitter:site" content="@martiixx"><!-- Additional Meta Tags --><meta name="keywords" content="microservices, architecture, backend, patterns"><meta name="theme-color" content="#f23551"><meta name="msapplication-TileColor" content="#f23551"><!-- Favicon and App Icons --><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><!-- Preconnect to external domains --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><!-- Structured Data --><script type="application/ld+json">{"@context":"https://schema.org","@type":"Person","name":"Martin Carrasco","jobTitle":"Software Engineer Consultant","description":"Experienced Software Engineer Consultant specializing in backend architecture, microservices, and high-performance systems.","url":"https://www.martiixx.dev","image":"https://pub-55f502b1bb8a47b18e001af1f25c9d6c.r2.dev/profile-picture.jpeg","sameAs":["https://github.com/martiixx","https://linkedin.com/in/martin-carrasco-godoy"],"knowsAbout":["Backend Architecture","Microservices","TypeScript","Node.js","NestJS","Kafka","PostgreSQL","MongoDB","Redis","Docker","Kubernetes","AWS"],"worksFor":{"@type":"Organization","name":"Apiux"}}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Martin Carrasco - Software Engineer Consultant","description":"Software Engineer Consultant specializing in backend architecture, microservices, and high-performance systems.","url":"https://www.martiixx.dev","potentialAction":{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://www.martiixx.dev/blog?search={search_term_string}"},"query-input":"required name=search_term_string"}}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Microservices Architecture Patterns: A Practical Guide","description":"Explore the most effective microservices patterns for building scalable, maintainable systems. Learn from real-world experience implementing these patterns in production environments.","image":"/blog/microservices-patterns.jpg","author":{"@type":"Person","name":"Martin Carrasco"},"publisher":{"@type":"Organization","name":"Martin Carrasco - Software Engineer Consultant","logo":{"@type":"ImageObject","url":"https://pub-55f502b1bb8a47b18e001af1f25c9d6c.r2.dev/profile-picture.jpeg"}},"datePublished":"2024-01-15T00:00:00.000Z","dateModified":"2024-01-20T00:00:00.000Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.martiixx.dev/blog/microservices-architecture-patterns"},"keywords":"microservices, architecture, backend, patterns"}</script><title>Microservices Architecture Patterns: A Practical Guide</title><link rel="stylesheet" href="/_astro/about.DYeUXnIZ.css">
<link rel="stylesheet" href="/_astro/_slug_.BM-1Ksqe.css"><script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.11.1 - MIT QwikDev */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,l,d,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(d=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(l=setTimeout(v,(null==s?void 0:s.fallbackTimeout)||1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.11.1":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<d.length;n++)(o=r.createElement("script")).innerHTML=d[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(l)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/~partytown/']");if(r)e.newDocument.body.append(r)})})(document);</script></head> <body data-astro-cid-37fxchfa> <header data-astro-cid-37fxchfa> <nav data-astro-cid-37fxchfa> <div class="nav-content" data-astro-cid-37fxchfa> <a href="/" class="logo" data-astro-cid-37fxchfa> <img src="https://pub-55f502b1bb8a47b18e001af1f25c9d6c.r2.dev/profile-picture.jpeg" class="profile-pic" data-astro-cid-37fxchfa> <span data-astro-cid-37fxchfa>Microservices Architecture Patterns: A Practical Guide</span> </a> <div class="nav-links" data-astro-cid-37fxchfa> <a href="/" data-astro-cid-37fxchfa>Home</a> <a href="/projects" data-astro-cid-37fxchfa>Projects</a> <a href="/blog" data-astro-cid-37fxchfa>Blog</a> <a href="/about" data-astro-cid-37fxchfa>About</a> <a href="/contact" data-astro-cid-37fxchfa>Contact</a> </div> <button class="menu-btn" aria-label="Open menu" onclick="toggleMenu()" data-astro-cid-37fxchfa> <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-37fxchfa><line x1="3" y1="12" x2="21" y2="12" data-astro-cid-37fxchfa></line><line x1="3" y1="6" x2="21" y2="6" data-astro-cid-37fxchfa></line><line x1="3" y1="18" x2="21" y2="18" data-astro-cid-37fxchfa></line></svg> </button> </div> <div id="mobile-menu" class="mobile-menu" data-astro-cid-37fxchfa> <a href="/" onclick="toggleMenu()" data-astro-cid-37fxchfa>Home</a> <a href="/projects" onclick="toggleMenu()" data-astro-cid-37fxchfa>Projects</a> <a href="/blog" onclick="toggleMenu()" data-astro-cid-37fxchfa>Blog</a> <a href="/about" onclick="toggleMenu()" data-astro-cid-37fxchfa>About</a> <a href="/contact" onclick="toggleMenu()" data-astro-cid-37fxchfa>Contact</a> </div> </nav> </header> <main data-astro-cid-37fxchfa>  <article class="blog-post" data-astro-cid-4sn4zg3r> <!-- Hero Section --> <section class="post-hero" data-astro-cid-4sn4zg3r> <div class="container" data-astro-cid-4sn4zg3r> <div class="post-meta" data-astro-cid-4sn4zg3r> <span class="post-date" data-astro-cid-4sn4zg3r> January 14, 2024 </span> <span class="post-author" data-astro-cid-4sn4zg3r>by Martin Carrasco</span> <span class="post-updated" data-astro-cid-4sn4zg3r>
Updated: January 19, 2024 </span> </div> <h1 class="post-title" data-astro-cid-4sn4zg3r>Microservices Architecture Patterns: A Practical Guide</h1> <div class="post-tags" data-astro-cid-4sn4zg3r> <span class="post-tag" data-astro-cid-4sn4zg3r>microservices</span><span class="post-tag" data-astro-cid-4sn4zg3r>architecture</span><span class="post-tag" data-astro-cid-4sn4zg3r>backend</span><span class="post-tag" data-astro-cid-4sn4zg3r>patterns</span> </div> </div> </section> <!-- Featured Image --> <section class="post-image" data-astro-cid-4sn4zg3r> <div class="container" data-astro-cid-4sn4zg3r> <img src="/blog/microservices-patterns.jpg" alt="Microservices Architecture Patterns: A Practical Guide" data-astro-cid-4sn4zg3r> </div> </section> <!-- Content --> <section class="post-content" data-astro-cid-4sn4zg3r> <div class="container" data-astro-cid-4sn4zg3r> <div class="content-wrapper" data-astro-cid-4sn4zg3r> <h1 id="microservices-architecture-patterns-a-practical-guide">Microservices Architecture Patterns: A Practical Guide</h1>
<p>Building scalable systems requires more than just breaking down a monolith into smaller services. It requires understanding and implementing the right architectural patterns for your specific use case. In this post, I’ll share the patterns I’ve found most effective in production environments.</p>
<h2 id="the-challenge-of-microservices">The Challenge of Microservices</h2>
<p>When transitioning from a monolithic architecture to microservices, teams often face several challenges:</p>
<ul>
<li><strong>Service Communication</strong>: How do services talk to each other efficiently?</li>
<li><strong>Data Consistency</strong>: How do we maintain data integrity across services?</li>
<li><strong>Service Discovery</strong>: How do services find each other?</li>
<li><strong>Fault Tolerance</strong>: How do we handle service failures gracefully?</li>
</ul>
<h2 id="pattern-1-event-driven-architecture">Pattern 1: Event-Driven Architecture</h2>
<p>Event-driven architecture is one of the most powerful patterns for microservices. Instead of services directly calling each other, they communicate through events.</p>
<h3 id="benefits">Benefits:</h3>
<ul>
<li><strong>Loose Coupling</strong>: Services don’t need to know about each other</li>
<li><strong>Scalability</strong>: Easy to add new services that react to events</li>
<li><strong>Fault Tolerance</strong>: Failed services don’t break the entire system</li>
</ul>
<h3 id="implementation-example">Implementation Example:</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#6A737D">// Event Publisher</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#B392F0">Injectable</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> OrderService</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">private</span><span style="color:#FFAB70"> eventBus</span><span style="color:#F97583">:</span><span style="color:#B392F0"> EventBus</span><span style="color:#E1E4E8">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> createOrder</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">orderData</span><span style="color:#F97583">:</span><span style="color:#B392F0"> CreateOrderDto</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> order</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.ordersRepository.</span><span style="color:#B392F0">create</span><span style="color:#E1E4E8">(orderData);</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    // Publish event instead of direct service call</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.eventBus.</span><span style="color:#B392F0">publish</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">new</span><span style="color:#B392F0"> OrderCreatedEvent</span><span style="color:#E1E4E8">(order));</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> order;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Event Handler</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#B392F0">EventsHandler</span><span style="color:#E1E4E8">(OrderCreatedEvent)</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> InventoryHandler</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> handle</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">event</span><span style="color:#F97583">:</span><span style="color:#B392F0"> OrderCreatedEvent</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">    // Update inventory based on order</span></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.inventoryService.</span><span style="color:#B392F0">updateStock</span><span style="color:#E1E4E8">(event.order.items);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="pattern-2-saga-pattern-for-distributed-transactions">Pattern 2: Saga Pattern for Distributed Transactions</h2>
<p>The Saga pattern helps maintain data consistency across multiple services without using distributed transactions.</p>
<h3 id="how-it-works">How It Works:</h3>
<ol>
<li>Break down a complex transaction into smaller, local transactions</li>
<li>Each local transaction publishes events</li>
<li>Compensating actions handle failures</li>
</ol>
<h3 id="example-implementation">Example Implementation:</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#B392F0">Injectable</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> OrderSaga</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> execute</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">orderData</span><span style="color:#F97583">:</span><span style="color:#B392F0"> CreateOrderDto</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">      // Step 1: Create order</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> order</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.orderService.</span><span style="color:#B392F0">create</span><span style="color:#E1E4E8">(orderData);</span></span>
<span class="line"><span style="color:#E1E4E8">      </span></span>
<span class="line"><span style="color:#6A737D">      // Step 2: Reserve inventory</span></span>
<span class="line"><span style="color:#F97583">      await</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.inventoryService.</span><span style="color:#B392F0">reserve</span><span style="color:#E1E4E8">(order.items);</span></span>
<span class="line"><span style="color:#E1E4E8">      </span></span>
<span class="line"><span style="color:#6A737D">      // Step 3: Process payment</span></span>
<span class="line"><span style="color:#F97583">      await</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.paymentService.</span><span style="color:#B392F0">process</span><span style="color:#E1E4E8">(order.payment);</span></span>
<span class="line"><span style="color:#E1E4E8">      </span></span>
<span class="line"><span style="color:#6A737D">      // Step 4: Confirm order</span></span>
<span class="line"><span style="color:#F97583">      await</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.orderService.</span><span style="color:#B392F0">confirm</span><span style="color:#E1E4E8">(order.id);</span></span>
<span class="line"><span style="color:#E1E4E8">      </span></span>
<span class="line"><span style="color:#E1E4E8">    } </span><span style="color:#F97583">catch</span><span style="color:#E1E4E8"> (error) {</span></span>
<span class="line"><span style="color:#6A737D">      // Compensating actions</span></span>
<span class="line"><span style="color:#F97583">      await</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">compensate</span><span style="color:#E1E4E8">(orderData);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="pattern-3-api-gateway-pattern">Pattern 3: API Gateway Pattern</h2>
<p>An API Gateway acts as a single entry point for all client requests, handling cross-cutting concerns like authentication, rate limiting, and routing.</p>
<h3 id="key-responsibilities">Key Responsibilities:</h3>
<ul>
<li><strong>Authentication &#x26; Authorization</strong></li>
<li><strong>Rate Limiting</strong></li>
<li><strong>Request Routing</strong></li>
<li><strong>Response Aggregation</strong></li>
<li><strong>Protocol Translation</strong></li>
</ul>
<h3 id="implementation-with-nestjs">Implementation with NestJS:</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#B392F0">Controller</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'api'</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> ApiGatewayController</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  @</span><span style="color:#B392F0">Get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'orders/:id'</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> getOrder</span><span style="color:#E1E4E8">(@</span><span style="color:#B392F0">Param</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'id'</span><span style="color:#E1E4E8">) </span><span style="color:#FFAB70">id</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">, @</span><span style="color:#B392F0">Req</span><span style="color:#E1E4E8">() </span><span style="color:#FFAB70">req</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Request</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">    // Authenticate request</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> user</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.authService.</span><span style="color:#B392F0">validateToken</span><span style="color:#E1E4E8">(req.headers.authorization);</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    // Route to order service</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> order</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.orderService.</span><span style="color:#B392F0">getOrder</span><span style="color:#E1E4E8">(id, user.id);</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    // Enrich with additional data</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> enrichedOrder</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">enrichOrderData</span><span style="color:#E1E4E8">(order);</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> enrichedOrder;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="pattern-4-circuit-breaker-pattern">Pattern 4: Circuit Breaker Pattern</h2>
<p>The Circuit Breaker pattern prevents cascading failures by monitoring service calls and failing fast when a service is down.</p>
<h3 id="states">States:</h3>
<ul>
<li><strong>Closed</strong>: Normal operation</li>
<li><strong>Open</strong>: Failing fast, not calling the service</li>
<li><strong>Half-Open</strong>: Testing if service is back up</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#B392F0">Injectable</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> CircuitBreakerService</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  private</span><span style="color:#FFAB70"> circuitBreaker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> CircuitBreaker</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">    failureThreshold: </span><span style="color:#79B8FF">5</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    resetTimeout: </span><span style="color:#79B8FF">60000</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> callService</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">>(</span><span style="color:#B392F0">serviceCall</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#B392F0"> Promise</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">>)</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Promise</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">> {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.circuitBreaker.</span><span style="color:#B392F0">fire</span><span style="color:#E1E4E8">(serviceCall);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="pattern-5-cqrs-command-query-responsibility-segregation">Pattern 5: CQRS (Command Query Responsibility Segregation)</h2>
<p>CQRS separates read and write operations, allowing you to optimize each independently.</p>
<h3 id="benefits-1">Benefits:</h3>
<ul>
<li><strong>Performance</strong>: Optimize read and write models separately</li>
<li><strong>Scalability</strong>: Scale read and write operations independently</li>
<li><strong>Flexibility</strong>: Use different databases for reads and writes</li>
</ul>
<h3 id="implementation">Implementation:</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#6A737D">// Command Handler</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#B392F0">CommandHandler</span><span style="color:#E1E4E8">(CreateOrderCommand)</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> CreateOrderHandler</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> execute</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">command</span><span style="color:#F97583">:</span><span style="color:#B392F0"> CreateOrderCommand</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> order</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Order</span><span style="color:#E1E4E8">(command.orderData);</span></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.orderRepository.</span><span style="color:#B392F0">save</span><span style="color:#E1E4E8">(order);</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    // Publish event for read model</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.eventBus.</span><span style="color:#B392F0">publish</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">new</span><span style="color:#B392F0"> OrderCreatedEvent</span><span style="color:#E1E4E8">(order));</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Query Handler</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#B392F0">QueryHandler</span><span style="color:#E1E4E8">(GetOrderQuery)</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> GetOrderHandler</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> execute</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">query</span><span style="color:#F97583">:</span><span style="color:#B392F0"> GetOrderQuery</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">    // Use optimized read model</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.orderReadRepository.</span><span style="color:#B392F0">findById</span><span style="color:#E1E4E8">(query.orderId);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="best-practices-for-implementation">Best Practices for Implementation</h2>
<h3 id="1-start-small">1. Start Small</h3>
<p>Don’t try to implement all patterns at once. Start with the most critical ones for your use case.</p>
<h3 id="2-use-event-sourcing">2. Use Event Sourcing</h3>
<p>Combine event-driven architecture with event sourcing for better audit trails and debugging.</p>
<h3 id="3-implement-proper-monitoring">3. Implement Proper Monitoring</h3>
<p>Use distributed tracing and monitoring to understand service interactions.</p>
<h3 id="4-design-for-failure">4. Design for Failure</h3>
<p>Always assume services will fail and design accordingly.</p>
<h3 id="5-keep-services-small">5. Keep Services Small</h3>
<p>Aim for services that can be understood and maintained by a small team.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Microservices architecture patterns provide powerful tools for building scalable systems, but they also add complexity. The key is choosing the right patterns for your specific requirements and implementing them incrementally.</p>
<p>Remember, patterns are tools, not rules. Adapt them to your specific needs and always consider the trade-offs between complexity and benefits.</p>
<hr>
<p><em>What patterns have you found most effective in your microservices implementations? Share your experiences in the comments below!</em></p> </div> <!-- Share Section --> <div class="share-section" data-astro-cid-4sn4zg3r> <h3 data-astro-cid-4sn4zg3r>Share this article</h3> <div class="share-buttons" data-astro-cid-4sn4zg3r> <a href="https://twitter.com/intent/tweet?text=Microservices%20Architecture%20Patterns%3A%20A%20Practical%20Guide&url=https%3A%2F%2Fwww.martiixx.dev%2Fblog%2Fmicroservices-architecture-patterns%2F" target="_blank" rel="noopener noreferrer" class="share-btn twitter" data-astro-cid-4sn4zg3r> <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-4sn4zg3r> <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z" data-astro-cid-4sn4zg3r></path> </svg>
Twitter
</a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.martiixx.dev%2Fblog%2Fmicroservices-architecture-patterns%2F" target="_blank" rel="noopener noreferrer" class="share-btn linkedin" data-astro-cid-4sn4zg3r> <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-4sn4zg3r> <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" data-astro-cid-4sn4zg3r></path> </svg>
LinkedIn
</a> </div> </div> </div> </section> </article>  </main> <footer data-astro-cid-37fxchfa> <div class="footer-content" data-astro-cid-37fxchfa> <p data-astro-cid-37fxchfa>&copy; 2025 Martin Carrasco. All rights reserved.</p> </div> </footer> <!-- Google Analytics 4 --><script type="text/partytown" async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script> <script type="text/partytown">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX', {
    page_title: document.title,
    page_location: window.location.href,
    send_page_view: true,
    anonymize_ip: true,
    cookie_flags: 'SameSite=None;Secure'
  });
</script> <!-- Privacy Notice --><div id="privacy-notice" class="privacy-notice" style="display: none;" data-astro-cid-o5r437bz> <div class="privacy-content" data-astro-cid-o5r437bz> <p data-astro-cid-o5r437bz>This website uses cookies and analytics to improve your experience. By continuing to use this site, you consent to our use of cookies.</p> <div class="privacy-buttons" data-astro-cid-o5r437bz> <button onclick="acceptCookies()" class="privacy-btn accept" data-astro-cid-o5r437bz>Accept</button> <button onclick="declineCookies()" class="privacy-btn decline" data-astro-cid-o5r437bz>Decline</button> </div> </div> </div>  <script type="module">function i(t){const o=`; ${document.cookie}`.split(`; ${t}=`);if(o.length===2)return o.pop()?.split(";").shift()}document.addEventListener("DOMContentLoaded",function(){const t=i("analytics-consent");if(t)t==="declined"&&typeof gtag<"u"&&gtag("consent","update",{analytics_storage:"denied"});else{const n=document.getElementById("privacy-notice");n&&(n.style.display="block"),typeof gtag<"u"&&gtag("consent","default",{analytics_storage:"denied"})}});function e(t,n={}){typeof gtag<"u"&&i("analytics-consent")==="accepted"&&gtag("event",t,n)}function a(t,n){typeof gtag<"u"&&i("analytics-consent")==="accepted"&&gtag("event","page_view",{page_title:t,page_location:n})}function c(t){e("form_submit",{form_name:t,page_location:window.location.href})}function l(t,n){e("button_click",{button_name:t,button_location:n,page_location:window.location.href})}function d(t,n){e("external_link_click",{link_url:t,link_text:n,page_location:window.location.href})}window.trackEvent=e;window.trackPageView=a;window.trackFormSubmission=c;window.trackButtonClick=l;window.trackExternalLink=d;</script> <script type="module">function d(){if("PerformanceObserver"in window){const e=new PerformanceObserver(r=>{const c=r.getEntries(),i=c[c.length-1];window.trackEvent&&window.trackEvent("core_web_vital",{metric_name:"LCP",metric_value:Math.round(i.startTime),metric_rating:s(i.startTime,[2500,4e3])})});try{e.observe({entryTypes:["largest-contentful-paint"]})}catch(r){console.warn("LCP observer failed:",r)}const t=new PerformanceObserver(r=>{r.getEntries().forEach(i=>{const o=i;window.trackEvent&&window.trackEvent("core_web_vital",{metric_name:"FID",metric_value:Math.round(o.processingStart-o.startTime),metric_rating:s(o.processingStart-o.startTime,[100,300])})})});try{t.observe({entryTypes:["first-input"]})}catch(r){console.warn("FID observer failed:",r)}let n=0;const a=new PerformanceObserver(r=>{r.getEntries().forEach(i=>{const o=i;o.hadRecentInput||(n+=o.value)}),window.trackEvent&&window.trackEvent("core_web_vital",{metric_name:"CLS",metric_value:Math.round(n*1e3)/1e3,metric_rating:s(n,[.1,.25])})});try{a.observe({entryTypes:["layout-shift"]})}catch(r){console.warn("CLS observer failed:",r)}}window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];if(e){const t={dns_lookup:e.domainLookupEnd-e.domainLookupStart,tcp_connection:e.connectEnd-e.connectStart,server_response:e.responseEnd-e.requestStart,dom_parsing:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,page_load:e.loadEventEnd-e.loadEventStart,total_load_time:e.loadEventEnd-e.fetchStart};window.trackEvent&&window.trackEvent("page_performance",{page_url:window.location.href,...t})}},0)})}function s(e,t){const[n,a]=t;return e<=n?"good":e<=a?"needs-improvement":"poor"}function w(){if("PerformanceObserver"in window){const e=new PerformanceObserver(t=>{t.getEntries().forEach(a=>{const r=a;r.duration>1e3&&window.trackEvent&&window.trackEvent("slow_resource",{resource_url:r.name,resource_type:r.initiatorType,load_time:Math.round(r.duration),transfer_size:r.transferSize||0})})});try{e.observe({entryTypes:["resource"]})}catch(t){console.warn("Resource observer failed:",t)}}}function l(){let e=0;window.addEventListener("scroll",()=>{const n=Math.round(window.scrollY/(document.body.scrollHeight-window.innerHeight)*100);n>e&&(e=n,[25,50,75,100].includes(n)&&window.trackEvent&&window.trackEvent("scroll_depth",{depth_percentage:n,page_url:window.location.href}))});let t=Date.now();window.addEventListener("beforeunload",()=>{const n=Date.now()-t;window.trackEvent&&window.trackEvent("time_on_page",{time_seconds:Math.round(n/1e3),page_url:window.location.href})})}function f(){window.addEventListener("error",e=>{window.trackEvent&&window.trackEvent("javascript_error",{error_message:e.message,error_filename:e.filename,error_lineno:e.lineno,error_colno:e.colno,page_url:window.location.href})}),window.addEventListener("unhandledrejection",e=>{window.trackEvent&&window.trackEvent("unhandled_promise_rejection",{error_message:e.reason?.message||e.reason,page_url:window.location.href})})}document.addEventListener("DOMContentLoaded",()=>{d(),w(),l(),f()});</script>  </body> </html> 